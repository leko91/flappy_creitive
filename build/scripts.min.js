function Paddle(e,t,i,d){this.x=e,this.y=t,this.width=i,this.height=d,this.xSpeed=0,this.ySpeed=0}function Computer(){this.paddle=new Paddle(175,10,50,10)}function Player(){this.paddle=new Paddle(175,580,50,10)}function Ball(e,t){this.x=e,this.y=t,this.xSpeed=0,this.ySpeed=3}var animate=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},canvas=document.createElement("canvas"),width=400,height=600;canvas.width=width,canvas.height=height;var context=canvas.getContext("2d"),player=new Player,computer=new Computer,ball=new Ball(200,300),keysDown={},render=function(){context.fillStyle="#FF00FF",context.fillRect(0,0,width,height),player.render(),computer.render(),ball.render()},update=function(){player.update(),computer.update(ball),ball.update(player.paddle,computer.paddle)},step=function(){update(),render(),animate(step)};Paddle.prototype.render=function(){context.fillStyle="#0000FF",context.fillRect(this.x,this.y,this.width,this.height)},Paddle.prototype.move=function(e,t){this.x+=e,this.y+=t,this.xSpeed=e,this.ySpeed=t,this.x<0?(this.x=0,this.xSpeed=0):this.x+this.width>400&&(this.x=400-this.width,this.xSpeed=0)},Computer.prototype.render=function(){this.paddle.render()},Computer.prototype.update=function(e){var t=e.x,i=-(this.paddle.x+this.paddle.width/2-t);i<0&&i<-4?i=-5:i>0&&i>4&&(i=5),this.paddle.move(i,0),this.paddle.x<0?this.paddle.x=0:this.paddle.x+this.paddle.width>400&&(this.paddle.x=400-this.paddle.width)},Player.prototype.render=function(){this.paddle.render()},Player.prototype.update=function(){for(var e in keysDown){var t=Number(e);37==t?this.paddle.move(-4,0):39==t?this.paddle.move(4,0):this.paddle.move(0,0)}},Ball.prototype.render=function(){context.beginPath(),context.arc(this.x,this.y,5,2*Math.PI,!1),context.fillStyle="#000000",context.fill()},Ball.prototype.update=function(e,t){this.x+=this.xSpeed,this.y+=this.ySpeed;var i=this.x-5,d=this.y-5,h=this.x+5,n=this.y+5;this.x-5<0?(this.x=5,this.xSpeed=-this.xSpeed):this.x+5>400&&(this.x=395,this.xSpeed=-this.xSpeed),(this.y<0||this.y>600)&&(this.xSpeed=0,this.ySpeed=3,this.x=200,this.y=300),d>300?d<e.y+e.height&&n>e.y&&i<e.x+e.width&&h>e.x&&(this.ySpeed=-3,this.xSpeed+=e.xSpeed/2,this.y+=this.ySpeed):d<t.y+t.height&&n>t.y&&i<t.x+t.width&&h>t.x&&(this.ySpeed=3,this.xSpeed+=t.xSpeed/2,this.y+=this.ySpeed)},document.body.appendChild(canvas),animate(step),window.addEventListener("keydown",function(e){keysDown[e.keyCode]=!0}),window.addEventListener("keyup",function(e){delete keysDown[e.keyCode]});